/*----------------------------------------------------------------------------
 * Name:    TMPM369_TP.ini
 * Purpose: TMPM369 Trace Initialization File
 * Note(s): 
 *----------------------------------------------------------------------------
 * This file is part of the uVision/ARM development tools.
 * This software may only be used under the terms of a valid, current,
 * end user licence from KEIL for a compatible version of KEIL software
 * development tools. Nothing else gives you the right to use this software.
 *
 * This software is supplied "AS IS" without warranties of any kind.
 *
 * Copyright (c) 2011 Keil - An ARM Company. All rights reserved.
 *----------------------------------------------------------------------------*/
// <<< Use Configuration Wizard in Context Menu >>>                           // 

/*----------------------------------------------------------------------------
  DebugSetup()  configure PINs for Trace
 *----------------------------------------------------------------------------*/
FUNC void DebugSetup (void) {
// <h> Port # function register
//   <o5.1> PB1F1: TRACE DATA3    
//   <o5.0> PB0F1: TRACE DATA2   
//   <o2.7> PA7F1: TRACE DATA1   
//   <o2.6> PA6F1: TRACE DATA0  
//   <o2.5> PA5F1: TRACE CLK   
// </h>
// <h> Port # control register 
//   <o11.1> PB1CR:  Output enable   
//   <o11.0> PB0CR:  Output enable   
//   <o8.7> PA7CR:  Output enable   
//   <o8.6> PA6CR:  Output enable   
//   <o8.5> PA5CR:  Output enable   
// </h>

  _WDWORD(0x400C0008, _RDWORD(0x400C0008) | 0xE0);   /* Port A PAFR1 register Pins used for Trace */
  _WDWORD(0x400C0108, _RDWORD(0x400C0108) | 0x03);   /* Port B PAFR1 register Pins used for Trace */
  _WDWORD(0x400C0004, _RDWORD(0x400C0004) | 0xE0);   /* Port A PACR register Output enable */
  _WDWORD(0x400C0104, _RDWORD(0x400C0104) | 0x03);   /* Port B PBCR register Output enable */
}

// Executed after reset via uVision's 'Reset'-button
FUNC void OnResetExec (void) {
  DebugSetup();
}

DebugSetup();                       // Debugger Setup

